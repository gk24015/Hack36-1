var mongoose = require('mongoose');

var ProposalSchema = new mongoose.Schema({
    title : {
        type: String,
        required: true
    },
    organization: {
        type: String,
        required: true
    },
    description: {
        type: String,
        required: true
    },
    contact: {
        type: String,
    },
    deadline: {
        type: Date,
        required: true
    },
    createdAt: {
        type: Date,
        default: Date.now
    },
    createId: {
        type: String,
        required: true
    },
    coverImage: {
        type: Buffer
    },
    coverImageType: {
        type: String,
    },
    developerId : [String],
    chat: [{
        text: String,
        sender: String,
        typer: String
    }],
    video: [{
        sender: String,
        date: String,
        typer: String,
    }],
    githubRepoName: {
        type: String,
    },
    githubUserName: {
        type: String,
    }
})

const defaultData = "data: image/jpeg; charset=utf-8; base64, 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"

ProposalSchema.virtual('coverImagePath').get(function() {
    if(this.coverImage != null && this.coverImageType != null)
        return `data: ${this.coverImageType}; charset=utf-8; base64, ${this.coverImage.toString('base64')}`
    else
        return defaultData;
})

module.exports = mongoose.model('Proposals', ProposalSchema);